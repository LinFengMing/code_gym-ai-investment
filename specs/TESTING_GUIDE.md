# AI 股票趨勢分析系統 - 測試指南

## 🧪 測試準備

### 1. 環境設置
```bash
# 確保已安裝所有依賴
uv sync

# 啟動應用程式
streamlit run src/app.py
```

### 2. 準備 API Keys

#### 台股測試需要：
- **FindMind API Key**: 從 https://finmindtrade.com/ 註冊獲取
- **OpenAI API Key**: 從 https://platform.openai.com 獲取

#### 美股測試需要：
- **FMP API Key**: 從 https://financialmodelingprep.com/ 註冊獲取
- **OpenAI API Key**: 從 https://platform.openai.com 獲取

## 📝 測試案例

### 測試案例 1: 台股基本功能測試

**測試目標**: 驗證台股代碼偵測與資料獲取

**測試步驟**:
1. 啟動應用程式
2. 在股票代碼輸入框輸入：`2330`
3. 確認系統顯示：「🇹🇼 偵測到台股代碼，請輸入 FindMind API Key」
4. 輸入 FindMind API Key
5. 輸入 OpenAI API Key
6. 選擇日期範圍（建議：最近 90 天）
7. 點擊「🚀 開始分析」

**預期結果**:
- ✅ 系統正確偵測為台股
- ✅ 顯示 FindMind API Key 輸入框
- ✅ 成功獲取台積電（2330）歷史數據
- ✅ K線圖標題顯示「- 台股」
- ✅ 價格單位顯示「NT$」
- ✅ AI 分析正常產生

**其他台股測試代碼**:
- `2317` (鴻海)
- `2454` (聯發科)
- `2881` (富邦金)

---

### 測試案例 2: 美股基本功能測試

**測試目標**: 驗證美股代碼偵測與資料獲取

**測試步驟**:
1. 啟動應用程式
2. 在股票代碼輸入框輸入：`TSLA`
3. 確認系統顯示：「偵測到美股代碼，請輸入 FMP API Key」
4. 輸入 FMP API Key
5. 輸入 OpenAI API Key
6. 選擇日期範圍（建議：最近 90 天）
7. 點擊「🚀 開始分析」

**預期結果**:
- ✅ 系統正確偵測為美股
- ✅ 顯示 FMP API Key 輸入框
- ✅ 成功獲取蘋果（TSLA）歷史數據
- ✅ K線圖標題顯示「- 美股」
- ✅ 價格單位顯示「$」
- ✅ AI 分析正常產生

**其他美股測試代碼**:
- `MSFT` (微軟)
- `GOOGL` (Google)
- `TSLA` (特斯拉)

---

### 測試案例 3: 股票代碼切換測試

**測試目標**: 驗證動態 API Key 輸入框切換功能

**測試步驟**:
1. 在股票代碼輸入框輸入：`2330`
2. 觀察顯示的 API Key 輸入框（應該是 FindMind）
3. 將股票代碼改為：`TSLA`
4. 觀察 API Key 輸入框是否自動切換（應該變成 FMP）
5. 再次改回：`2330`
6. 確認再次切換回 FindMind

**預期結果**:
- ✅ API Key 輸入框根據股票代碼類型動態切換
- ✅ 視覺提示（info box）正確顯示
- ✅ 股票類型標籤正確更新

---

### 測試案例 4: RSI 指標測試

**測試目標**: 驗證 RSI 技術指標計算正確

**測試步驟**:
1. 選擇任一股票進行分析（台股或美股）
2. 在 RSI 計算週期滑桿調整為不同數值（如：7, 14, 21）
3. 執行分析
4. 觀察 RSI 圖表和數值

**預期結果**:
- ✅ RSI 圖表正確顯示
- ✅ RSI 超買線（70）顯示紅色虛線
- ✅ RSI 超賣線（30）顯示綠色虛線
- ✅ 超買/超賣區域有背景色
- ✅ 當前 RSI 值正確顯示在統計資訊區
- ✅ RSI 狀態警告正確顯示

---

### 測試案例 5: 錯誤處理測試

**測試目標**: 驗證系統錯誤處理機制

#### 5.1 空白股票代碼
- 輸入：（留空）
- 預期：顯示「請輸入股票代碼」錯誤訊息

#### 5.2 空白 API Key
- 輸入股票代碼但不輸入 API Key
- 預期：顯示「請輸入 XX API Key」錯誤訊息

#### 5.3 無效股票代碼
- 輸入不存在的股票代碼（如：`9999999`）
- 預期：顯示友善的錯誤訊息

#### 5.4 日期範圍錯誤
- 起始日期晚於結束日期
- 預期：顯示「起始日期不能晚於或等於結束日期」

#### 5.5 無效 API Key
- 輸入錯誤的 API Key
- 預期：顯示 API 請求失敗錯誤訊息

---

## 🔍 細節檢查清單

### UI/UX 檢查
- [ ] 頁面標題顯示「AI 股票趨勢分析系統 (美股與台股)」
- [ ] 股票代碼輸入框提示文字正確
- [ ] API Key 輸入框根據股票類型動態顯示
- [ ] 視覺提示（🇹🇼 / 🇺🇸）正確顯示
- [ ] 圖表標題包含股票市場類型
- [ ] 貨幣單位（NT$ / $）正確顯示
- [ ] 統計資訊標題包含股票類型

### 功能檢查
- [ ] 台股數據獲取正常
- [ ] 美股數據獲取正常
- [ ] 移動平均線計算正確
- [ ] RSI 指標計算正確
- [ ] K線圖顯示正常
- [ ] 成交量圖顯示正常
- [ ] RSI 圖表顯示正常
- [ ] AI 分析生成正常
- [ ] 歷史數據表格顯示正確

### 錯誤處理檢查
- [ ] 空白輸入驗證
- [ ] API 連線錯誤處理
- [ ] 資料格式錯誤處理
- [ ] 日期範圍驗證
- [ ] 友善的錯誤訊息

---

## 📊 效能測試

### 測試項目
1. **資料載入時間**
   - 台股：應在 5-10 秒內完成
   - 美股：應在 5-10 秒內完成

2. **AI 分析時間**
   - 應在 20-30 秒內完成

3. **圖表渲染**
   - 應該流暢無卡頓

4. **介面響應**
   - 輸入框切換應即時響應

---

## 🐛 已知問題與限制

### FindMind API 限制
- 免費帳號可能有請求次數限制
- 部分股票可能無歷史數據

### FMP API 限制
- 免費帳號每日請求次數有限
- 需要有效的 API Key

### OpenAI API 限制
- 需要有效的 API Key 和足夠的額度
- 回應時間可能因網路狀況而異

---

## 💡 測試建議

1. **循序漸進測試**
   - 先測試基本功能
   - 再測試邊界情況
   - 最後測試錯誤處理

2. **多樣化測試**
   - 測試不同的股票代碼
   - 測試不同的日期範圍
   - 測試不同的 RSI 週期

3. **記錄測試結果**
   - 記錄任何異常行為
   - 截圖保存錯誤訊息
   - 記錄效能數據

4. **跨瀏覽器測試**
   - Chrome
   - Firefox
   - Edge
   - Safari (如有 Mac)

---

## 📞 問題回報

如發現任何問題，請記錄：
1. 測試案例編號
2. 具體操作步驟
3. 預期結果 vs 實際結果
4. 錯誤訊息截圖
5. 瀏覽器和作業系統版本

---

**測試指南版本**: 1.0
**更新日期**: 2026-01-12
